import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{F as N}from"./index-D7DNl-ap.js";import{r as l,e as A}from"./index-DTOEHpHZ.js";import{u as T}from"./index-eFf25hYI.js";import{B as x}from"./index-DyRkmeWf.js";import{c as M}from"./index-rkLeB0kx.js";import{L as k}from"./index-BcQiDnY4.js";function D(i,o=2){if(i===0)return"0 Bytes";const t=1024,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(i)/Math.log(t));return parseFloat((i/t**r).toFixed(o))+" "+s[r]}const B=(i,o)=>{const t=new DataTransfer;o.forEach(s=>{t.items.add(s)}),i.files=t.files},q=({multiple:i,name:o,state:t,icon:s,animateIcon:r,successIcon:u,uploadingIcon:p,text:a,bigText:d,files:f,onFilesChange:n,children:y,ref:m,...w})=>{const[b,_]=l.useState(!1),j=l.useRef(null),v=l.useRef(null),{t:g}=T();l.useImperativeHandle(m,()=>({get input(){return v.current},reset(){n==null||n({target:{value:[]}})}})),l.useEffect(()=>{v.current&&B(v.current,f)},[f]),l.useEffect(()=>{n==null||n({target:{value:f??[]}})},[f]);const E=()=>t==="success"?u??e.jsx("span",{className:"material-icons",children:"done"}):t==="uploading"?A.cloneElement(p??e.jsx(k,{size:"small"}),{"aria-label":g("components.forms.file_uploader.uploading")}):s??e.jsx("span",{className:"material-icons",children:"upload"}),R=()=>t==="uploading"?g("components.forms.file_uploader.uploading"):d||e.jsxs(e.Fragment,{children:[g("components.forms.file_uploader.caption"),e.jsx("span",{children:g("components.forms.file_uploader.browse_files")})]});return e.jsx("label",{className:M("c__file-uploader","c__file-uploader--"+t,{"c__file-uploader--active":b,"c__file-uploader--animate-icon":r}),onDragEnter:()=>{_(!0)},onDragLeave:c=>{j.current.contains(c.relatedTarget)||_(!1)},onDragOver:c=>{c.preventDefault()},onDrop:c=>{c.preventDefault();const h=Array.from(c.dataTransfer.files);v.current&&(v.current.files=c.dataTransfer.files,n==null||n({target:{value:[...h]}})),_(!1)},ref:j,children:e.jsxs("div",{className:"c__file-uploader__inner",children:[e.jsx("div",{className:"c__file-uploader__inner__icon",children:E()}),y??e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"c__file-uploader__inner__caption",children:R()}),a&&e.jsx("div",{className:"c__file-uploader__inner__text",children:a})]}),e.jsx("input",{type:"file",name:o,ref:v,onChange:c=>{c.target.files?n==null||n({target:{value:[...c.target.files]}}):n==null||n({target:{value:[]}})},multiple:i,...w})]})})};q.__docgenInfo={description:"",methods:[{name:"input",docblock:null,modifiers:["get"],params:[],returns:null},{name:"reset",docblock:null,modifiers:[],params:[],returns:null}],displayName:"DropZone",props:{state:{required:!1,tsType:{name:"union",raw:'FieldState | "uploading" | undefined',elements:[{name:"union",raw:'"success" | "error" | "default"',elements:[{name:"literal",value:'"success"'},{name:"literal",value:'"error"'},{name:"literal",value:'"default"'}]},{name:"literal",value:'"uploading"'},{name:"undefined"}]},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:""},icon:{required:!1,tsType:{name:"ReactElement"},description:""},successIcon:{required:!1,tsType:{name:"ReactElement"},description:""},deleteIcon:{required:!1,tsType:{name:"ReactElement"},description:""},fileSelectedIcon:{required:!1,tsType:{name:"ReactElement"},description:""},uploadingIcon:{required:!1,tsType:{name:"ReactElement"},description:""},animateIcon:{required:!1,tsType:{name:"boolean"},description:""},name:{required:!1,tsType:{name:"string"},description:""},bigText:{required:!1,tsType:{name:"string"},description:""},onFilesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: { target: { value: File[] } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: File[] } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: File[] }",signature:{properties:[{key:"value",value:{name:"Array",elements:[{name:"File"}],raw:"File[]",required:!0}}]},required:!0}}]}},name:"event"}],return:{name:"void"}}},description:""},fakeDefaultFiles:{required:!1,tsType:{name:"Array",elements:[{name:"File"}],raw:"File[]"},description:""}},composes:["Omit","InputHTMLAttributes","RefAttributes"]};const F=({fullWidth:i,fakeDefaultFiles:o,ref:t,...s})=>{const{t:r}=T(),[u,p]=l.useState(o||[]);return l.useEffect(()=>{var a;(a=s.onFilesChange)==null||a.call(s,{target:{value:u}})},[u]),e.jsxs(e.Fragment,{children:[e.jsx(q,{...s,files:u,onFilesChange:a=>p(a.target.value),animateIcon:!0,ref:t}),u.length>0&&e.jsx("div",{className:"c__file-uploader__files",children:u.map(a=>e.jsxs("div",{className:"c__file-uploader__file",children:[e.jsx("div",{className:"c__file-uploader__file__name",children:a.name}),e.jsxs("div",{className:"c__file-uploader__file__specs",children:[e.jsx("span",{children:D(a.size)}),e.jsx(x,{color:"tertiary-text",size:"nano","aria-label":r("components.forms.file_uploader.delete_file_name",{name:a.name}),onClick:()=>{p(u.filter(d=>d!==a))},icon:e.jsx("span",{className:"material-icons",children:"close"})})]})]},""+a.name+a.size+a.type+a.lastModified))})]})};F.__docgenInfo={description:"",methods:[],displayName:"FileUploaderMulti",props:{state:{required:!1,tsType:{name:"union",raw:'FieldState | "uploading" | undefined',elements:[{name:"union",raw:'"success" | "error" | "default"',elements:[{name:"literal",value:'"success"'},{name:"literal",value:'"error"'},{name:"literal",value:'"default"'}]},{name:"literal",value:'"uploading"'},{name:"undefined"}]},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:""},icon:{required:!1,tsType:{name:"ReactElement"},description:""},successIcon:{required:!1,tsType:{name:"ReactElement"},description:""},deleteIcon:{required:!1,tsType:{name:"ReactElement"},description:""},fileSelectedIcon:{required:!1,tsType:{name:"ReactElement"},description:""},uploadingIcon:{required:!1,tsType:{name:"ReactElement"},description:""},animateIcon:{required:!1,tsType:{name:"boolean"},description:""},name:{required:!1,tsType:{name:"string"},description:""},bigText:{required:!1,tsType:{name:"string"},description:""},onFilesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: { target: { value: File[] } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: File[] } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: File[] }",signature:{properties:[{key:"value",value:{name:"Array",elements:[{name:"File"}],raw:"File[]",required:!0}}]},required:!0}}]}},name:"event"}],return:{name:"void"}}},description:""},fakeDefaultFiles:{required:!1,tsType:{name:"Array",elements:[{name:"File"}],raw:"File[]"},description:""}},composes:["Omit","InputHTMLAttributes","RefAttributes"]};const I=({fakeDefaultFiles:i,ref:o,...t})=>{const{t:s}=T(),[r,u]=l.useState(i&&i.length>0?i[0]:void 0),p=l.useMemo(()=>r?[r]:[],[r]),[a,d]=l.useState(!1),[f,n]=l.useMemo(()=>a?[t.deleteIcon??e.jsx("span",{className:"material-icons",children:"delete"}),!0]:r?[t.fileSelectedIcon??e.jsx("span",{className:"material-icons",children:"download"}),!1]:[t.icon,!0],[r,a]),y=m=>{u(void 0),m.preventDefault(),d(!1)};return l.useEffect(()=>{var m;(m=t.onFilesChange)==null||m.call(t,{target:{value:r?[r]:[]}})},[r]),e.jsxs(e.Fragment,{children:[e.jsx(q,{...t,files:p,onFilesChange:m=>u(m.target.value[0]),icon:f,animateIcon:n,ref:o,children:r&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"c__file-uploader__inner__filename",children:r.name}),e.jsx("div",{className:"c__file-uploader__inner__actions",onClick:y,onMouseEnter:()=>{d(!0)},onMouseLeave:()=>d(!1),children:s("components.forms.file_uploader.delete_file")})]})}),r&&e.jsx(e.Fragment,{children:e.jsx(x,{onClick:y,className:"c__offscreen",children:s("components.forms.file_uploader.delete_file")})})]})};I.__docgenInfo={description:"",methods:[],displayName:"FileUploaderMono",props:{state:{required:!1,tsType:{name:"union",raw:'FieldState | "uploading" | undefined',elements:[{name:"union",raw:'"success" | "error" | "default"',elements:[{name:"literal",value:'"success"'},{name:"literal",value:'"error"'},{name:"literal",value:'"default"'}]},{name:"literal",value:'"uploading"'},{name:"undefined"}]},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:""},icon:{required:!1,tsType:{name:"ReactElement"},description:""},successIcon:{required:!1,tsType:{name:"ReactElement"},description:""},deleteIcon:{required:!1,tsType:{name:"ReactElement"},description:""},fileSelectedIcon:{required:!1,tsType:{name:"ReactElement"},description:""},uploadingIcon:{required:!1,tsType:{name:"ReactElement"},description:""},animateIcon:{required:!1,tsType:{name:"boolean"},description:""},name:{required:!1,tsType:{name:"string"},description:""},bigText:{required:!1,tsType:{name:"string"},description:""},onFilesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: { target: { value: File[] } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: File[] } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: File[] }",signature:{properties:[{key:"value",value:{name:"Array",elements:[{name:"File"}],raw:"File[]",required:!0}}]},required:!0}}]}},name:"event"}],return:{name:"void"}}},description:""},fakeDefaultFiles:{required:!1,tsType:{name:"Array",elements:[{name:"File"}],raw:"File[]"},description:""}},composes:["Omit","InputHTMLAttributes","RefAttributes"]};const S=({fullWidth:i,ref:o,...t})=>e.jsx(N,{fullWidth:i,className:t.className,children:t.multiple?e.jsx(F,{...t,ref:o}):e.jsx(I,{...t,ref:o})});S.__docgenInfo={description:"",methods:[],displayName:"FileUploader",props:{state:{required:!1,tsType:{name:"union",raw:'FieldState | "uploading" | undefined',elements:[{name:"union",raw:'"success" | "error" | "default"',elements:[{name:"literal",value:'"success"'},{name:"literal",value:'"error"'},{name:"literal",value:'"default"'}]},{name:"literal",value:'"uploading"'},{name:"undefined"}]},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:""},icon:{required:!1,tsType:{name:"ReactElement"},description:""},successIcon:{required:!1,tsType:{name:"ReactElement"},description:""},deleteIcon:{required:!1,tsType:{name:"ReactElement"},description:""},fileSelectedIcon:{required:!1,tsType:{name:"ReactElement"},description:""},uploadingIcon:{required:!1,tsType:{name:"ReactElement"},description:""},animateIcon:{required:!1,tsType:{name:"boolean"},description:""},name:{required:!1,tsType:{name:"string"},description:""},bigText:{required:!1,tsType:{name:"string"},description:""},onFilesChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: { target: { value: File[] } }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ target: { value: File[] } }",signature:{properties:[{key:"target",value:{name:"signature",type:"object",raw:"{ value: File[] }",signature:{properties:[{key:"value",value:{name:"Array",elements:[{name:"File"}],raw:"File[]",required:!0}}]},required:!0}}]}},name:"event"}],return:{name:"void"}}},description:""},fakeDefaultFiles:{required:!1,tsType:{name:"Array",elements:[{name:"File"}],raw:"File[]"},description:""}},composes:["Omit","InputHTMLAttributes","RefAttributes"]};export{S as F};
